{"mappings":"AAEA,MAAMA,EAAMC,KAAKC,MACXC,EAAiBC,SAASC,eAAe,eACzCC,EAAaF,SAASC,eAAe,WACrCE,EAAeH,SAASC,eAAe,aACvCG,EAAgBJ,SAASC,eAAe,cACxCI,EAAcL,SAASC,eAAe,eAE5C,SAASK,EAAYC,GACjB,MAAMC,EAASD,EAAIC,OAEfA,EAAOC,MAAMC,OAASF,EAAOG,IAAID,SACjCF,EAAOC,MAAQD,EAAOC,MAAMG,MAAM,EAAGJ,EAAOG,IAAID,SAIxD,SAASG,IACL,MAAMC,EAAUC,SAASb,EAAWO,OAC9BO,EAAcD,SAAShB,EAAeU,OAE5C,GAAIK,EAAUE,EAAa,CACvB,MAAMC,EAAQC,OAAOC,aACrBF,EAAMG,QAAQ,UAAWN,GACzBG,EAAMG,QAAQ,cAAeJ,GAE7B,MAGMK,EAAqB,IAAIxB,KAAKD,EADlB,MAFLoB,EAAcF,IAI3BT,EAAYiB,UAAYD,EAAmBE,mBAAmB,QAAS,CAAEC,QAAQ,IACjFrB,EAAasB,UAAW,OAExBpB,EAAYiB,UAAY,GACxBnB,EAAasB,UAAW,EAoChCP,OAAOQ,iBAAiB,QAdxB,WACI,MAAMT,EAAQC,OAAOC,aACfH,EAAcC,EAAMU,QAAQ,gBAAkB,IACpDV,EAAMG,QAAQ,cAAeJ,GAC7BjB,EAAeU,MAAQO,EAEvB,MAAMF,EAAUG,EAAMU,QAAQ,YAAcX,EAC5CC,EAAMG,QAAQ,UAAWN,GACzBZ,EAAWO,MAAQK,EAEnBZ,EAAWS,IAAMZ,EAAeU,MAChCI,OAIJT,EAAcwB,SAnBd,WACI,OAAO,GAmBX1B,EAAWwB,iBAAiB,QAASpB,GACrCP,EAAe2B,iBAAiB,QAASpB,GACzCP,EAAe2B,iBAAiB,UApChC,WAGI,GAFAb,IACAX,EAAWS,IAAMZ,EAAeU,MAC5BV,EAAe8B,gBAAiB,CAChC,MAAMZ,EAAQC,OAAOC,aACfH,EAAcD,SAAShB,EAAeU,OAC5CQ,EAAMG,QAAQ,cAAeJ,OA+BrCd,EAAWwB,iBAAiB,UA3B5B,WACIb","sources":["src/index.js"],"sourcesContent":["\"use strict\"\n\nconst now = Date.now()\nconst max_stamina_id = document.getElementById('max_stamina')\nconst stamina_id = document.getElementById('stamina')\nconst timer_set_id = document.getElementById('timer_set')\nconst timer_form_id = document.getElementById('timer_form')\nconst recovery_at = document.getElementById('recovery_at')\n\nfunction value_input(evt) {\n    const target = evt.target\n\n    if (target.value.length > target.max.length) {\n        target.value = target.value.slice(0, target.max.length)\n    }\n}\n\nfunction update_time() {\n    const stamina = parseInt(stamina_id.value)\n    const max_stamina = parseInt(max_stamina_id.value)\n\n    if (stamina < max_stamina) {\n        const store = window.localStorage\n        store.setItem(\"stamina\", stamina)\n        store.setItem(\"max_stamina\", max_stamina)\n\n        const diff = max_stamina - stamina\n        //1stamina per 6min\n        const time_diff = diff * 6 * 60000\n        const stamina_ready_time = new Date(now + time_diff)\n        recovery_at.innerHTML = stamina_ready_time.toLocaleTimeString(\"en-GB\", { hour12: false })\n        timer_set_id.disabled = false\n    } else {\n        recovery_at.innerHTML = \"\"\n        timer_set_id.disabled = true\n    }\n}\n\nfunction on_max_stamina_set() {\n    update_time()\n    stamina_id.max = max_stamina_id.value\n    if (max_stamina_id.checkValidity()) {\n        const store = window.localStorage\n        const max_stamina = parseInt(max_stamina_id.value)\n        store.setItem(\"max_stamina\", max_stamina)\n    }\n}\n\nfunction on_stamina_set() {\n    update_time()\n}\n\nfunction timer_set() {\n    return false\n}\n\nfunction on_init() {\n    const store = window.localStorage\n    const max_stamina = store.getItem(\"max_stamina\") || 135\n    store.setItem(\"max_stamina\", max_stamina)\n    max_stamina_id.value = max_stamina\n\n    const stamina = store.getItem(\"stamina\") || max_stamina\n    store.setItem(\"stamina\", stamina)\n    stamina_id.value = stamina\n\n    stamina_id.max = max_stamina_id.value\n    update_time()\n}\n\nwindow.addEventListener(\"load\", on_init)\ntimer_form_id.onsubmit = timer_set\nstamina_id.addEventListener('input', value_input)\nmax_stamina_id.addEventListener('input', value_input)\nmax_stamina_id.addEventListener('change', on_max_stamina_set)\nstamina_id.addEventListener('change', on_stamina_set)\n"],"names":["$55412f0e8ba14fe8$var$now","Date","now","$55412f0e8ba14fe8$var$max_stamina_id","document","getElementById","$55412f0e8ba14fe8$var$stamina_id","$55412f0e8ba14fe8$var$timer_set_id","$55412f0e8ba14fe8$var$timer_form_id","$55412f0e8ba14fe8$var$recovery_at","$55412f0e8ba14fe8$var$value_input","evt","target","value","length","max","slice","$55412f0e8ba14fe8$var$update_time","stamina","parseInt","max_stamina","store","window","localStorage","setItem","stamina_ready_time","innerHTML","toLocaleTimeString","hour12","disabled","addEventListener","getItem","onsubmit","checkValidity"],"version":3,"file":"index.37a29ac2.js.map"}